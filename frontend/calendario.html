<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Calend√°rio Acad√™mico - UCONNECT</title>

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- FullCalendar -->
  <link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.11/index.global.min.css" rel="stylesheet">

  <style>
    body {
      background: linear-gradient(135deg, #2c3e50, #1a252f);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }

    #calendar-container {
      max-width: 900px;
      width: 100%;
      background: #2b2b2b;
      padding: 20px;
      border-radius: 15px;
      box-shadow: 0 8px 24px rgba(0,0,0,0.6);
    }

    h2 {
      text-align: center;
      font-weight: bold;
      margin-bottom: 20px;
      color: #f8f9fa;
    }

    .fc-event {
      border: none;
      border-radius: 6px;
      padding: 4px 8px;
      font-size: 0.85rem;
      font-weight: 500;
    }

    .fc-event:hover { cursor: pointer; }

    /* Cores */
    .evento-aula { background: #4e73df !important; color: white; }
    .evento-prova { background: #e63946 !important; color: white; }
    .evento-comunicado { background: #6f42c1 !important; color: white; }
    .evento-entrega { background: #20c997 !important; color: white; }
    .evento-geral { background: #fd7e14 !important; color: white; }

    .fc .fc-daygrid-day-number {
      color: #e0e0e0 !important;
      font-weight: 500;
    }
  </style>
</head>
<body>
  <div id="calendar-container">
    <div class="d-flex justify-content-between align-items-center mb-3">
      <h2>üìÖ Calend√°rio Acad√™mico - UCONNECT</h2>
      <button class="btn btn-success btn-sm" data-bs-toggle="modal" data-bs-target="#addEventModal">
        ‚ûï Adicionar Evento
      </button>
    </div>
    <div id="calendar"></div>
  </div>

  <!-- Modal -->
  <div class="modal fade" id="addEventModal" tabindex="-1" aria-labelledby="addEventModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content bg-dark text-light">
        <div class="modal-header">
          <h5 class="modal-title" id="addEventModalLabel">Adicionar Novo Evento</h5>
          <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Fechar"></button>
        </div>
        <div class="modal-body">
          <form id="eventForm">
            <div class="mb-3">
              <label for="eventTitle" class="form-label">T√≠tulo</label>
              <input type="text" class="form-control" id="eventTitle" required>
            </div>
            <div class="mb-3">
              <label for="eventDate" class="form-label">Data</label>
              <input type="date" class="form-control" id="eventDate" required>
            </div>
            <div class="mb-3">
              <label for="eventTime" class="form-label">Hora (opcional)</label>
              <input type="time" class="form-control" id="eventTime">
            </div>
            <div class="mb-3">
              <label for="eventDesc" class="form-label">Descri√ß√£o</label>
              <textarea class="form-control" id="eventDesc"></textarea>
            </div>
            <div class="mb-3">
              <label for="eventType" class="form-label">Tipo</label>
              <select class="form-select" id="eventType">
                <option value="evento-aula">üìò Aula</option>
                <option value="evento-prova">üìù Prova</option>
                <option value="evento-comunicado">üì¢ Comunicado</option>
                <option value="evento-entrega">üìä Entrega</option>
                <option value="evento-geral">üé§ Evento Geral</option>
              </select>
            </div>
            <button type="submit" class="btn btn-primary">Adicionar</button>
          </form>
        </div>
      </div>
    </div>
  </div>

  <!-- Bootstrap Bundle -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <!-- FullCalendar -->
  <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.11/index.global.min.js"></script>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      let calendarEl = document.getElementById('calendar');
      let calendar = new FullCalendar.Calendar(calendarEl, {
        initialView: 'dayGridMonth',
        locale: 'pt-br',
        themeSystem: 'bootstrap5',
        height: 550,
        headerToolbar: {
          left: 'prev,next today',
          center: 'title',
          right: 'dayGridMonth,timeGridWeek,timeGridDay,listWeek'
        },
        events: [], // come√ßa vazio
        eventDidMount: function(info) {
          new bootstrap.Popover(info.el, {
            title: info.event.title,
            content: `
              <b>Descri√ß√£o:</b> ${info.event.extendedProps.descricao || 'Sem descri√ß√£o'}<br>
              <b>Tipo:</b> ${info.event.extendedProps.tipo || 'N/A'}
            `,
            placement: "top",
            trigger: "hover",
            html: true,
            container: "body"
          });
        }
      });

      calendar.render();

      // Formul√°rio de adicionar evento
      document.getElementById('eventForm').addEventListener('submit', function(e) {
        e.preventDefault();

        let title = document.getElementById('eventTitle').value;
        let date = document.getElementById('eventDate').value;
        let time = document.getElementById('eventTime').value;
        let descricao = document.getElementById('eventDesc').value;
        let tipo = document.getElementById('eventType').value;

        if (time) {
          date = date + "T" + time;
        }

        calendar.addEvent({
          title: title,
          start: date,
          className: tipo,
          extendedProps: {
            descricao: descricao,
            tipo: tipo
          }
        });

        // Fechar modal e limpar form
        document.getElementById('eventForm').reset();
        let modal = bootstrap.Modal.getInstance(document.getElementById('addEventModal'));
        modal.hide();
      });
    });
  </script>
</body>
</html>